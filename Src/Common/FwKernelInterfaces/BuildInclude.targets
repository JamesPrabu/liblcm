<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
	<UsingTask TaskName="IdlImp" AssemblyFile="..\..\..\Build\FwBuildTasks.dll"/>

	<ItemGroup>
		<KernelSources Include="$(OutDir)/../Common/FwKernelTlb.idl"/>
	</ItemGroup>
	<ItemGroup>
		<KernelIdhFiles Include="../../Kernel/FwKernel.idh"/>
		<KernelIdhFiles Include="../../Kernel/TextServ.idh"/>
		<KernelIdhFiles Include="../../Kernel/Language.idh"/>
	</ItemGroup>
	<ItemGroup>
		<KernelInputs Include="@(KernelIdhFiles)" />
		<KernelInputs Include="@(KernelSources)" />
	</ItemGroup>
	<Target Name="FwKernelCs" Inputs="@(KernelInputs)" Outputs="FwKernel.cs">
		<IdlImp Output="FwKernel.cs"
				Namespace="SIL.FieldWorks.Common.FwKernelInterfaces"
				Sources="@(KernelSources)"
				UsingNamespaces="@(UsingNamespaces)"
				IdhFiles="@(KernelIdhFiles)">
		</IdlImp>
	</Target>

	<Target Name="AfterClean">
		<Delete Files="@(OutputFiles)" ContinueOnError="true"/>
		<Delete Files="FwKernel.cs;$(OutDir)/../Common/FwKernelTlb.iip" ContinueOnError="true"/>
	</Target>
	<Target Name="BeforeBuild" DependsOnTargets="FwKernelCs">
	</Target>
	<Target Name="AfterBuild">
	</Target>
</Project>
